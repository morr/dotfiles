#!/usr/bin/env ruby

files = %w[
  .gemrc
  .gitconfig
  .pryrc
  .irbrc
  .zshrc
  .wezterm.lua
  .agignore
  .asdfrc
  .tool-versions
  .ssh/config
  .claude/settings.json
  .claude/statusline.sh
  .claude/CLAUDE.md
  .mcp.json
]

config_dirs = %w[
  nvim
]

current_dir = `pwd`.strip

require 'fileutils'
require 'shellwords'

def symlink(source, target)
  if File.symlink?(target) && File.readlink(target) == source
    puts "  already symlinked: #{target}"
  else
    FileUtils.rm_f(target)
    FileUtils.ln_s(source, target)
    puts "  symlinked: #{target} -> #{source}"
  end
end

files.each do |file|
  symlink("#{current_dir}/#{file}", "#{Dir.home}/#{file}")
end

config_dirs.each do |dir|
  symlink("#{current_dir}/#{dir}", "#{Dir.home}/.config/#{dir}")
end

symlink("#{current_dir}/lazygit/config.yml", "#{Dir.home}/Library/Application Support/lazygit/config.yml")

conf = '.gnupg/gpg.conf'
symlink("#{current_dir}/#{conf}", "#{Dir.home}/#{conf}")
puts 'dont forget to write passphrase to /Users/morr/.gnupg/passphrase'

puts 'done!'
